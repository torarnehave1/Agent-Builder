name = "agent-worker"
main = "index.js"
compatibility_date = "2024-11-01"
workers_dev = true

account_id = "5d9b2060ef095c777711a8649c24914e"

# Route for agent.vegvisr.org
# Requires DNS record: agent CNAME to workers.dev or proxied A/AAAA
[[routes]]
pattern = "agent.vegvisr.org/*"
zone_name = "vegvisr.org"

# Service binding to knowledge-graph-worker for KG operations
[[services]]
binding = "KG_WORKER"
service = "knowledge-graph-worker"

# Service binding to anthropic-worker for encrypted API key handling
[[services]]
binding = "ANTHROPIC"
service = "anthropic-worker"

# Service binding to perplexity-worker for web search
[[services]]
binding = "PERPLEXITY"
service = "perplexity-worker"

# D1 database for agent configs
[[d1_databases]]
binding = "DB"
database_name = "vegvisr_org"
database_id = "507d1efd-1dda-45ef-971f-52d2c8e8afe8"

[vars]
WORKER_NAME = "agent-worker"
